<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Samir Parmar">
<meta name="dcterms.date" content="2023-03-14">

<title>9&nbsp; 깔끔한 평가 – Pharma Hands-on Exercises</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./MiniProject12_ko.html" rel="next">
<link href="./MiniProject10_ko.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-cd63b520c5e060288b5099369e8bcbf0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./MiniProject11_ko.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">깔끔한 평가</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Pharma Hands-on Exercises</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">초록</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject1_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">데이터셋 읽기 및 탐색</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject2_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">2 - 연속형 및 범주형 데이터 요약</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject3_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">3 - 그룹화된 요약 통계 생성</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject4_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">4 - 요약 테이블 데이터 생성</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject6_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">{ggplot2} 확장</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject7_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">7 - 함수 작성 시작하기</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject8_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">8 - 반복을 통한 함수 적용</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject10_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">디버깅</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject11_ko.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">깔끔한 평가</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject12_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">12 - 테스트</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject13_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">13 - 코드 스타일</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject14_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">14 - R 스니펫</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#개요" id="toc-개요" class="nav-link active" data-scroll-target="#개요"><span class="header-section-number">9.1</span> 개요</a></li>
  <li><a href="#tidyeval이란-무엇입니까" id="toc-tidyeval이란-무엇입니까" class="nav-link" data-scroll-target="#tidyeval이란-무엇입니까"><span class="header-section-number">9.2</span> tidyeval이란 무엇입니까?</a></li>
  <li><a href="#평가된-인수와-인용된-인수" id="toc-평가된-인수와-인용된-인수" class="nav-link" data-scroll-target="#평가된-인수와-인용된-인수"><span class="header-section-number">9.3</span> 평가된 인수와 인용된 인수</a></li>
  <li><a href="#열-충돌" id="toc-열-충돌" class="nav-link" data-scroll-target="#열-충돌"><span class="header-section-number">9.4</span> 열 충돌</a></li>
  <li><a href="#동적-점" id="toc-동적-점" class="nav-link" data-scroll-target="#동적-점"><span class="header-section-number">9.5</span> 동적 점</a></li>
  <li><a href="#포옹-연산자" id="toc-포옹-연산자" class="nav-link" data-scroll-target="#포옹-연산자"><span class="header-section-number">9.6</span> 포옹 연산자</a></li>
  <li><a href="#바다코끼리-연산자와-뱅뱅-연산자" id="toc-바다코끼리-연산자와-뱅뱅-연산자" class="nav-link" data-scroll-target="#바다코끼리-연산자와-뱅뱅-연산자"><span class="header-section-number">9.7</span> 바다코끼리 연산자와 뱅뱅 연산자</a></li>
  <li><a href="#기호를-문자-이름으로-변환" id="toc-기호를-문자-이름으로-변환" class="nav-link" data-scroll-target="#기호를-문자-이름으로-변환"><span class="header-section-number">9.8</span> 기호를 문자 이름으로 변환</a></li>
  <li><a href="#추가-읽기-선택-사항" id="toc-추가-읽기-선택-사항" class="nav-link" data-scroll-target="#추가-읽기-선택-사항"><span class="header-section-number">9.9</span> 추가 읽기 (선택 사항)</a></li>
  <li><a href="#챌린지" id="toc-챌린지" class="nav-link" data-scroll-target="#챌린지"><span class="header-section-number">9.10</span> 챌린지</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">깔끔한 평가</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Samir Parmar </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 14, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="개요" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="개요"><span class="header-section-number">9.1</span> 개요</h2>
<p>이 미니 프로젝트에서는 깔끔한 평가(tidyeval)를 사용하여 <code>dplyr</code>과 같은 깔끔한 패키지를 사용하는 함수를 더 고급 방식으로 프로그래밍하는 방법을 살펴봅니다. 여기의 교육은 미니 프로젝트 7과 8에서 다룬 함수에 대한 자료의 연속으로 제공됩니다.</p>
</section>
<section id="tidyeval이란-무엇입니까" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="tidyeval이란-무엇입니까"><span class="header-section-number">9.2</span> tidyeval이란 무엇입니까?</h2>
<p>Tidyeval은 따옴표 없이 dplyr의 <code>select()</code>와 같은 깔끔한 함수에 열 이름을 전달할 수 있게 해주는 것입니다:</p>
<p><code>mtcars %&gt;% select(mpg, cyl)</code></p>
<p>Tidyeval을 R에서 메타프로그래밍을 위한 툴킷으로 생각할 수 있습니다. 이것이 깔끔한 세계를 움직이는 힘입니다. 이 교육에서는 tidyeval 개념을 사용하여 R 함수를 작성하는 방법을 살펴볼 것입니다.</p>
<p>Tidyeval을 R용 <a href="https://stats.oarc.ucla.edu/sas/seminars/sas-macros-introduction/">SAS 매크로</a>와 유사한 것으로 생각할 수 있습니다. R에는 PROC 또는 DATA 단계가 없기 때문에 일부 개념은 SAS에서 사용했던 것과 완전히 다를 수 있다는 점에 유의하십시오. 유사점이 있는 곳에 짧은 텍스트 덩어리를 추가했습니다.</p>
</section>
<section id="평가된-인수와-인용된-인수" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="평가된-인수와-인용된-인수"><span class="header-section-number">9.3</span> 평가된 인수와 인용된 인수</h2>
<p>평가된 인수와 인용된 인수가 무엇인지 궁금할 것입니다. 이미 깨닫지 못한 채 평가된 인수를 사용했습니다. 다음은 평가된 인수의 예입니다:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 평가된 인수입니다.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.302585</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 이것도 평가된 인수로 간주될 수 있습니다.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.302585</code></pre>
</div>
</div>
<p>인용은 dplyr::select() 및 기타 dplyr 동사가 전역 환경에서 해당 입력이 어떻게 평가되는지에 대해 걱정하지 않고 입력을 원하는 대로 사용할 수 있도록 합니다. 전역 환경에 mpg라는 객체가 있을 수 있더라도 mpg 열에서 작업할 수 있게 해주는 것입니다.</p>
<p>다음은 인용된 인수의 예입니다. 전역 환경의 mpg 객체가 <code>mtcars</code> 데이터셋 내의 mpg 열을 위해 무시되는 것을 볼 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="ot">&lt;-</span> <span class="dv">5020</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">select</span>(mpg) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg
Mazda RX4         21.0
Mazda RX4 Wag     21.0
Datsun 710        22.8
Hornet 4 Drive    21.4
Hornet Sportabout 18.7</code></pre>
</div>
</div>
<p>tidyeval을 사용할 때 종종 함수를 통해 인용된 인수를 전달합니다.</p>
</section>
<section id="열-충돌" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="열-충돌"><span class="header-section-number">9.4</span> 열 충돌</h2>
<p>이제 다음 예에서 어떤 일이 일어날지 추측해 보십시오. 실행하여 기대와 일치하는지 확인하십시오.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="cn">NA</span>, <span class="at">y =</span> <span class="dv">2</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">500</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">y =</span> y <span class="sc">/</span> x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   x  y
1 NA NA</code></pre>
</div>
</div>
<p>이것이 열 충돌이라고 불리는 것의 예입니다. 열 충돌은 데이터 프레임 외부에서 정의된 객체를 사용하려고 하지만 동일한 이름의 열이 이미 존재하는 경우에 발생합니다. 데이터 변수 이름에 오타가 있고 동일한 이름의 환경 변수가 있는 경우 객체 충돌이라는 반대 문제가 발생할 수도 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">foo =</span> <span class="st">"this is right"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>ffo <span class="ot">&lt;-</span> <span class="st">"this is wrong"</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">foo =</span> <span class="fu">toupper</span>(ffo))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            foo
1 THIS IS WRONG</code></pre>
</div>
</div>
<p>이러한 열 또는 객체 충돌을 어떻게 방지합니까? 가장 쉬운 해결책은 <code>.data</code> 및 <code>.env</code> 대명사를 사용하여 데이터 변수와 환경 변수를 명확하게 구분하는 것입니다. 다음은 더 구체적으로 충돌을 방지하기 위해 이를 사용하는 방법의 예입니다.</p>
<p>이것은 매크로 변수에 대한 SAS의 <a href="https://blogs.sas.com/content/sgf/2015/02/13/sas-macro-variables-how-to-determine-scope/">전역 대 지역 범위</a>와 다소 유사하며, 충돌을 피하기 위해 %LOCAL 또는 %GLOBAL 문을 사용할 수 있습니다. 또한 R의 전역 대 지역을 논의한 이전 디버깅 교육과도 연결됩니다(이에 대해 잊어버렸다면 MiniProject9 참조). 이 경우 함수에 대한 지역이 아니라 <code>.data</code> 대명사를 사용하는 데이터프레임에 대한 지역입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">2</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">z1 =</span> y <span class="sc">/</span> x) <span class="sc">%&gt;%</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">z2 =</span> .data<span class="sc">$</span>y <span class="sc">/</span> .env<span class="sc">$</span>x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x y z1   z2
1 1 2  2 0.02</code></pre>
</div>
</div>
<p>다음은 이러한 개념이 어떻게 유용할 수 있는지 보여주는 rlang 설명서의 또 다른 예입니다. 무슨 일이 일어나고 있는지 추적하기 위해 한 줄씩 실행해 보십시오.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 인수로 팩터를 사용하려는 첫 번째 시도</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>my_rescale1 <span class="ot">&lt;-</span> <span class="cf">function</span>(data, var, <span class="at">factor =</span> <span class="dv">10</span>) {</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="st">"{{ var }}"</span> <span class="sc">:</span><span class="er">=</span> {{ var }} <span class="sc">/</span> factor)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># :=가 무엇인지 궁금할 것입니다. 기본적으로 바다코끼리 연산자라고 하는 특수 할당 연산자입니다. 이것은 교육 뒷부분에서 더 자세히 설명될 것입니다. 지금은 함수를 통해 전달된 factor 인수를 어떻게 사용하고 싶은지 주목하십시오.</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 이것은 작동합니다.</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># data.frame() 함수는 데이터 프레임을 만듭니다(자세한 내용은 ?data.frame() 실행).</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">value =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">my_rescale1</span>(value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  value
1   0.1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 이것은 예상대로 작동하지 않습니다.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 무슨 일이 일어나고 있는지 알 수 있습니까(힌트: 어떤 factor 값을 사용하는지 파악)?</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">factor =</span> <span class="dv">0</span>, <span class="at">value =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">my_rescale1</span>(value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  factor value
1      0   Inf</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 좋습니다, 이것을 수정해 보겠습니다.</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 여기에 대한 해결책이 있습니다:</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>my_rescale2 <span class="ot">&lt;-</span> <span class="cf">function</span>(data, var, <span class="at">factor =</span> <span class="dv">10</span>) {</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="st">"{{ var }}"</span> <span class="sc">:</span><span class="er">=</span> {{ var }} <span class="sc">/</span> .env<span class="sc">$</span>factor)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 야호!</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">factor =</span> <span class="dv">0</span>, <span class="at">value =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">my_rescale2</span>(value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  factor value
1      0   0.1</code></pre>
</div>
</div>
</section>
<section id="동적-점" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="동적-점"><span class="header-section-number">9.5</span> 동적 점</h2>
<p>함수의 <code>...</code>은 임의의 수의 인수를 받을 수 있습니다. …를 전달하는 것은 <code>enquos()</code>와 <code>!!!</code>의 조합과 동일합니다. 이러한 구성 요소 함수는 이 교육의 범위를 벗어납니다.</p>
<p>예를 들어, 동적 점 연산자를 사용하여 사용자 지정 함수에 대해 무제한의 조건으로 필터링할 수 있습니다. 2008년에 제조된 지프를 얻기 위해 mpg 데이터셋에서 그렇게 해보겠습니다(데이터셋에 대한 정보는 <code>?mpg</code> 사용).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mpg 데이터 세트 로드</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(mpg)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># mpg 필터 함수 정의</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>mpg_filter <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  mpg <span class="sc">%&gt;%</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(...)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2008년산 지프를 얻기 위해 여기에서 인수 업데이트</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mpg_filter</span>(manufacturer <span class="sc">==</span> <span class="st">"volkswagen"</span>, year <span class="sc">==</span> <span class="dv">1900</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 11
# ℹ 11 variables: manufacturer &lt;chr&gt;, model &lt;chr&gt;, displ &lt;dbl&gt;, year &lt;int&gt;,
#   cyl &lt;int&gt;, trans &lt;chr&gt;, drv &lt;chr&gt;, cty &lt;int&gt;, hwy &lt;int&gt;, fl &lt;chr&gt;,
#   class &lt;chr&gt;</code></pre>
</div>
</div>
<p>위 예에서는 <code>filter()</code>를 통해 여러 인수를 수집할 수 있었습니다.</p>
<p>동적 점을 사용하여 함수를 예상대로 작동하도록 수정하십시오(힌트: 미니 프로젝트 7에서 이것을 살펴보았습니다). 계속 진행하기 전에 무슨 일이 일어나고 있는지 이해했는지 확인하십시오.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>mySummary <span class="ot">&lt;-</span> <span class="cf">function</span>(myData, ...) { <span class="co"># 추가 인수를 받기 위해 ... 추가</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  myData <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>( TRT01AN, TRT01A ) <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">round</span>(<span class="fu">mean</span>(AGE), ...), <span class="co"># ...를 round()에 전달</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="co"># 요약 후 그룹 해제를 위한 좋은 습관으로 추가</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="fu">mySummary</span>(adsl_saf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  TRT01AN TRT01A                mean
    &lt;dbl&gt; &lt;chr&gt;                &lt;dbl&gt;
1       0 Placebo                 75
2      54 Xanomeline Low Dose     76
3      81 Xanomeline High Dose    74</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mySummary</span>(adsl_saf, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  TRT01AN TRT01A                mean
    &lt;dbl&gt; &lt;chr&gt;                &lt;dbl&gt;
1       0 Placebo               75.2
2      54 Xanomeline Low Dose   75.7
3      81 Xanomeline High Dose  74.4</code></pre>
</div>
</div>
</section>
<section id="포옹-연산자" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="포옹-연산자"><span class="header-section-number">9.6</span> 포옹 연산자</h2>
<p>깔끔한 파이프라인 주위에 함수를 만들 때 데이터 프레임 변수를 포함하는 함수 인수를 <code>{{</code> 및 <code>}}</code>로 래핑합니다. <code>{{</code>는 <code>enquo()</code>와 <code>!!</code>의 조합입니다. 이렇게 하면 함수를 통해 명명된 인수를 전달할 수 있습니다. 이전 미니 프로젝트에서 이 연산자를 사용한 것을 기억할 수 있습니다.</p>
<p>이것을 SAS와 연결하려면 함수를 SAS 매크로로 생각할 수 있습니다. 포옹 연산자를 데이터 프레임 변수에 대한 매개변수를 설정하거나 인수를 전달하는 방법으로 생각할 수 있습니다. 이것은 SAS 매크로에서 매크로 변수 또는 매크로 프로그램과 관련된 SAS 문의 모든 키워드 앞에 백분율 기호 %가 붙고 매크로 변수를 참조할 때 앰퍼샌드 기호 &amp;가 붙는 것과 유사합니다. 이것은 특히 데이터프레임 변수에 대한 것입니다. 이전 교육에서 기억했듯이 사용자 지정 함수에 대해 모든 경우에 필요하지는 않습니다.</p>
<p>이것이 어떻게 생겼는지 보여주는 예입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>plot_mpg <span class="ot">&lt;-</span> <span class="cf">function</span>(var) {</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  mpg <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>({{ var }})) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>()</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_mpg</span>(drv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="MiniProject11_ko_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>도시 갤런당 마일에 대한 제조업체별 요약 통계를 얻기 위해 <code>mpg</code> 데이터셋에서 해당 연산자를 다시 적용해 보겠습니다. 포옹 연산자를 사용하여 이 예제를 수정하여 작동하도록 하십시오.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>grouped_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(df, group_var, summary_var) {</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>( {{ group_var }} ) <span class="sc">%&gt;%</span> <span class="co"># group_var 포옹</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>( {{ summary_var }} ) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">nsmall =</span> <span class="dv">0</span>) , <span class="co"># summary_var 포옹</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">sd =</span> <span class="fu">sd</span>( {{ summary_var }} ) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">nsmall =</span> <span class="dv">1</span>),  <span class="co"># summary_var 포옹</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">med =</span> <span class="fu">median</span>( {{ summary_var }} ) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">nsmall =</span> <span class="dv">0</span>) , <span class="co"># summary_var 포옹</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">min =</span> <span class="fu">min</span>( {{ summary_var }} ) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">nsmall =</span> <span class="dv">0</span>),  <span class="co"># summary_var 포옹</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">max =</span> <span class="fu">max</span>( {{ summary_var }} ) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">nsmall =</span> <span class="dv">0</span>), <span class="co"># summary_var 포옹</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="co"># 좋은 습관을 위해 .groups = 'drop' 추가</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 이제 의도한 대로 함수 테스트:</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="fu">grouped_mean</span>(<span class="at">df =</span> mpg, <span class="at">group_var =</span> manufacturer, <span class="at">summary_var =</span> cty)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 7
   manufacturer mean  sd    med   min   max       n
   &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;
 1 audi         18    2.0   18    15    21       18
 2 chevrolet    15    2.9   15    11    22       19
 3 dodge        13    2.5   13    9     18       37
 4 ford         14    1.9   14    11    18       25
 5 honda        24    1.9   24    21    28        9
 6 hyundai      19    1.5   18    16    21       14
 7 jeep         14    2.5   14    9     17        8
 8 land rover   12    0.6   12    11    12        4
 9 lincoln      11    0.6   11    11    12        3
10 mercury      13    0.5   13    13    14        4
11 nissan       18    3.4   19    12    23       13
12 pontiac      17    1.0   17    16    18        5
13 subaru       19    0.9   19    18    21       14
14 toyota       19    4.0   18    11    28       34
15 volkswagen   21    4.6   21    16    35       27</code></pre>
</div>
</div>
<p>이것을 SAS 매크로와 연결하면 위 경우에 수행한 작업은 SAS 매크로에서 <a href="https://v8doc.sas.com/sashtml/macro/z0210322.htm">SYMGET()</a> 함수를 사용하여 매크로 변수의 정보로 DATA STEP에서 새 변수를 만드는 것과 유사합니다.</p>
</section>
<section id="바다코끼리-연산자와-뱅뱅-연산자" class="level2" data-number="9.7">
<h2 data-number="9.7" class="anchored" data-anchor-id="바다코끼리-연산자와-뱅뱅-연산자"><span class="header-section-number">9.7</span> 바다코끼리 연산자와 뱅뱅 연산자</h2>
<p>바다코끼리 연산자는 할당에 유용합니다. 바다코끼리 모양이라서 기억하기 쉽습니다:<code>:=</code>. 일반적으로 할당의 왼쪽에 포옹 연산자나 뱅뱅을 사용하는 경우 바다코끼리 연산자(<code>:=</code>)가 필요합니다.</p>
<p><code>!!</code>는 뱅뱅 연산자입니다. <code>!!</code>는 “나를 평가해!” 또는 “인용 해제!”와 같은 의미입니다. <code>!!</code>를 사용하여 <code>group_by()</code>에 인용하지 않도록 지시할 수 있습니다.</p>
<p>여기서 <code>enquo()</code>는 또한 quosure를 반환하는 데 사용됩니다. quosure가 무엇인지 궁금할 것입니다. quosure는 특별한 유형의 해제된 표현식입니다(이것이 무엇을 의미하는지 이해하고 싶다면 이 문서 링크를 훑어보십시오: https://rlang.r-lib.org/reference/topic-defuse.html). 표현식이 작성된 원래 컨텍스트를 추적합니다. 더 자세히 알고 싶다면 <code>enquo()</code> 또는 <code>!!</code>에 대한 rlang 도움말 문서를 방문하십시오(rlang::<code>!!</code> 또는 ?rlang::enquo()를 사용할 수 있습니다).</p>
<p>다음은 이러한 개념을 함께 사용하는 예입니다. 관심 변수의 평균을 계산하고 관심 있는 새 변수 이름에 할당하는 함수를 만듭니다. 데이터프레임에 새 변수 이름을 할당하는 인수를 전달하려는 경우 이것이 유용하다는 것을 알 수 있습니다. 그렇지 않으면 수행하기 어려울 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>summary_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(df, summary_var, summary_name) {</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  summary_var <span class="ot">&lt;-</span> <span class="fu">enquo</span>(summary_var)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  summary_name <span class="ot">&lt;-</span> <span class="fu">enquo</span>(summary_name)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="sc">!!</span><span class="at">summary_name :=</span> <span class="fu">mean</span>(<span class="sc">!!</span>summary_var))</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 여기에서 이 함수를 단순화할 수 있는 방법이 있습니까(힌트: 포옹 연산자 사용)?</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="fu">summary_mean</span>(<span class="at">df =</span> mpg, <span class="at">summary_var =</span> cty, <span class="at">summary_name =</span> cty_mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  cty_mean
     &lt;dbl&gt;
1     16.9</code></pre>
</div>
</div>
<p>이제 시도해 보겠습니다. 바다코끼리 및 뱅뱅 연산자를 사용하여 다음 예제를 실행하고 이해하려고 노력하십시오.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#패턴 1</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>mySummary1 <span class="ot">&lt;-</span> <span class="cf">function</span>(myData, summary_var, ...){</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  summary_var <span class="ot">&lt;-</span> <span class="fu">enquo</span>(summary_var)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  myData <span class="sc">%&gt;%</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>( TRT01AN, TRT01A ) <span class="sc">%&gt;%</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">round</span>(<span class="fu">mean</span>(<span class="sc">!!</span>summary_var), ... ))</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mySummary1</span>(adsl_saf, AGE, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'TRT01AN'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
# Groups:   TRT01AN [3]
  TRT01AN TRT01A                mean
    &lt;dbl&gt; &lt;chr&gt;                &lt;dbl&gt;
1       0 Placebo               75.2
2      54 Xanomeline Low Dose   75.7
3      81 Xanomeline High Dose  74.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#패턴 2</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>mySummary2 <span class="ot">&lt;-</span> <span class="cf">function</span>(myData, summary_var, summary_name, ...){</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  summary_var <span class="ot">&lt;-</span> <span class="fu">enquo</span>(summary_var)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  myData <span class="sc">%&gt;%</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>( TRT01AN, TRT01A ) <span class="sc">%&gt;%</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>({{summary_name}} <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>(<span class="fu">mean</span>(<span class="sc">!!</span>summary_var), ... ))</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mySummary2</span>(adsl_saf, AGE, mean, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'TRT01AN'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
# Groups:   TRT01AN [3]
  TRT01AN TRT01A                mean
    &lt;dbl&gt; &lt;chr&gt;                &lt;dbl&gt;
1       0 Placebo               75.2
2      54 Xanomeline Low Dose   75.7
3      81 Xanomeline High Dose  74.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#패턴 3</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>mySummary3 <span class="ot">&lt;-</span> <span class="cf">function</span>(myData, summary_var, summary_fn, ...){</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 더 이상 이 enquo() 줄이 필요하지 않습니다... 이유를 설명할 수 있습니까?</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># summary_var &lt;- enquo(summary_var)</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  myData <span class="sc">%&gt;%</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>( TRT01AN, TRT01A ) <span class="sc">%&gt;%</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>({{summary_fn}} <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>(<span class="fu">summary_fn</span>({{summary_var}}), ... ))</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="fu">mySummary3</span>(adsl_saf, AGE, mean, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'TRT01AN'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
# Groups:   TRT01AN [3]
  TRT01AN TRT01A                mean
    &lt;dbl&gt; &lt;chr&gt;                &lt;dbl&gt;
1       0 Placebo               75.2
2      54 Xanomeline Low Dose   75.7
3      81 Xanomeline High Dose  74.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mySummary3</span>(adsl_saf, AGE, median, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'TRT01AN'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
# Groups:   TRT01AN [3]
  TRT01AN TRT01A               median
    &lt;dbl&gt; &lt;chr&gt;                 &lt;dbl&gt;
1       0 Placebo                76  
2      54 Xanomeline Low Dose    77.5
3      81 Xanomeline High Dose   76  </code></pre>
</div>
</div>
</section>
<section id="기호를-문자-이름으로-변환" class="level2" data-number="9.8">
<h2 data-number="9.8" class="anchored" data-anchor-id="기호를-문자-이름으로-변환"><span class="header-section-number">9.8</span> 기호를 문자 이름으로 변환</h2>
<p>기호는 x, mtcars 또는 mean과 같은 객체의 이름을 나타냅니다. 함수 본문 내에서 인수로 전달된 기호를 문자열로 다시 사용해야 하는 경우가 있을 수 있습니다. 이 경우 <code>rlang::as_name()</code>과 <code>substitute()</code>를 함께 사용하면 기호를 문자열로 변환하는 데 도움이 될 수 있습니다. <code>?rlang::as_name()</code> 및 <code>?substitute()</code>를 사용하여 자세한 내용은 함수 설명서를 읽으십시오.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>mpgf <span class="ot">&lt;-</span> <span class="cf">function</span>(.data, var_value) {</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  var_value <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">as_name</span>(<span class="fu">substitute</span>(var_value))</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  .data <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">transmute</span>(<span class="at">var =</span> var_value)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mpgf</span>(mpg, test1) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  var  
  &lt;chr&gt;
1 test1
2 test1
3 test1
4 test1
5 test1</code></pre>
</div>
</div>
<p>방금 살펴본 함수 쌍을 사용하여 미니 프로젝트 4의 다음 예제를 수정하여 작동하도록 하십시오:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>get_cat_demo <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">.data =</span> adsl_saf, <span class="at">variable =</span> RACE) {</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 힌트: 이 함수에서 어떤 문자 변수를 정의해야 합니까?</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 변수를 quosure로 캡처한 다음 이름(문자열)으로 변환합니다.</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  var_char <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">as_name</span>(<span class="fu">enquo</span>(variable))</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  Big_N_cnt <span class="ot">&lt;-</span> adsl_saf <span class="sc">%&gt;%</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(TRT01AN, TRT01A) <span class="sc">%&gt;%</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"N"</span>, <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="co"># 좋은 습관을 위해 .groups = 'drop' 추가</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>  small_n_cnt <span class="ot">&lt;-</span> adsl_saf <span class="sc">%&gt;%</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(TRT01AN, TRT01A, SEX) <span class="sc">%&gt;%</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n"</span>, <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="co"># 좋은 습관을 위해 .groups = 'drop' 추가</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  Agegrp_N_cnt <span class="ot">&lt;-</span> adsl_saf <span class="sc">%&gt;%</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(TRT01AN, TRT01A, {{variable}}) <span class="sc">%&gt;%</span> <span class="co"># {{variable}}은 그룹화를 위해 변수를 포옹합니다.</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"age_total"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">complete</span>(<span class="fu">nesting</span>(TRT01AN, TRT01A), {{variable}}, <span class="co"># {{variable}}은 완료를 위해 포옹합니다.</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="fu">list</span>(<span class="at">age_total=</span><span class="dv">0</span>))</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>  age_n_cnt <span class="ot">&lt;-</span> adsl_saf <span class="sc">%&gt;%</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(TRT01AN, TRT01A, SEX, {{variable}}) <span class="sc">%&gt;%</span> <span class="co"># {{variable}}은 그룹화를 위해 변수를 포옹합니다.</span></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"age_n"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 적절한 완료를 위해 모든 그룹화 변수가 중첩되어 있는지 확인합니다.</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">complete</span>(<span class="fu">nesting</span>(TRT01AN, TRT01A, SEX), {{variable}}, <span class="co"># 중첩에 SEX 추가, tidyeval을 위해 {{variable}} 추가</span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="fu">list</span>(<span class="at">age_n=</span><span class="dv">0</span>))</span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>  age_mrg_cnt <span class="ot">&lt;-</span> age_n_cnt <span class="sc">%&gt;%</span></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(Agegrp_N_cnt,</span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a>              <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"TRT01AN"</span>, <span class="st">"TRT01A"</span>, var_char)) <span class="co"># 여기에서 var_char 사용</span></span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a>  age_mrg_cnt2 <span class="ot">&lt;-</span> age_mrg_cnt <span class="sc">%&gt;%</span></span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(Big_N_cnt,</span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a>              <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"TRT01AN"</span>, <span class="st">"TRT01A"</span>))</span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a>  age_mrg_cnt3 <span class="ot">&lt;-</span> age_mrg_cnt2 <span class="sc">%&gt;%</span></span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(small_n_cnt,</span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a>              <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"TRT01A"</span>, <span class="st">"TRT01AN"</span>, <span class="st">"SEX"</span>))</span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a>  age_mrg_cnt3 <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(age_mrg_cnt3)</span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true" tabindex="-1"></a>  age_data_new <span class="ot">&lt;-</span> age_mrg_cnt3 <span class="sc">%&gt;%</span></span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">perc_tot =</span> <span class="fu">round</span>((age_total<span class="sc">/</span>N)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb44-45"><a href="#cb44-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">perc_age =</span> <span class="fu">round</span>((age_n<span class="sc">/</span>n)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>))</span>
<span id="cb44-46"><a href="#cb44-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-47"><a href="#cb44-47" aria-hidden="true" tabindex="-1"></a>  age_pct <span class="ot">&lt;-</span> age_data_new <span class="sc">%&gt;%</span></span>
<span id="cb44-48"><a href="#cb44-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">perc_tchar =</span> <span class="fu">format</span>(perc_tot, <span class="at">nsmall =</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb44-49"><a href="#cb44-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">perc_achar =</span> <span class="fu">format</span>(perc_age, <span class="at">nsmall =</span> <span class="dv">1</span>))</span>
<span id="cb44-50"><a href="#cb44-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-51"><a href="#cb44-51" aria-hidden="true" tabindex="-1"></a>  age_n_pct <span class="ot">&lt;-</span> age_pct <span class="sc">%&gt;%</span></span>
<span id="cb44-52"><a href="#cb44-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">npct =</span> <span class="fu">paste</span>(age_n, <span class="fu">paste0</span>(<span class="st">"("</span>, perc_achar, <span class="st">")"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb44-53"><a href="#cb44-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>({{variable}}, TRT01A, SEX, npct) <span class="co"># {{variable}}은 선택을 위해 포옹합니다.</span></span>
<span id="cb44-54"><a href="#cb44-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-55"><a href="#cb44-55" aria-hidden="true" tabindex="-1"></a>  Age_trans <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(age_n_pct,</span>
<span id="cb44-56"><a href="#cb44-56" aria-hidden="true" tabindex="-1"></a>                           <span class="at">names_from =</span> <span class="fu">c</span>(TRT01A,SEX),</span>
<span id="cb44-57"><a href="#cb44-57" aria-hidden="true" tabindex="-1"></a>                           <span class="at">values_from =</span> npct,</span>
<span id="cb44-58"><a href="#cb44-58" aria-hidden="true" tabindex="-1"></a>                           <span class="at">values_fill =</span> <span class="st">"0"</span>,</span>
<span id="cb44-59"><a href="#cb44-59" aria-hidden="true" tabindex="-1"></a>                           <span class="at">names_sep =</span> <span class="st">"_"</span>)</span>
<span id="cb44-60"><a href="#cb44-60" aria-hidden="true" tabindex="-1"></a>  age_cat <span class="ot">&lt;-</span> <span class="fu">rename</span>(Age_trans, <span class="at">category=</span>{{variable}}) <span class="co"># {{variable}}은 이름 바꾸기를 위해 포옹합니다.</span></span>
<span id="cb44-61"><a href="#cb44-61" aria-hidden="true" tabindex="-1"></a>  sorted_age_cat <span class="ot">&lt;-</span> age_cat <span class="sc">%&gt;%</span></span>
<span id="cb44-62"><a href="#cb44-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(category)</span>
<span id="cb44-63"><a href="#cb44-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(sorted_age_cat)</span>
<span id="cb44-64"><a href="#cb44-64" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-65"><a href="#cb44-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-66"><a href="#cb44-66" aria-hidden="true" tabindex="-1"></a><span class="co"># 예제 사용법 (adsl_saf가 환경에 정의되어 있다고 가정)</span></span>
<span id="cb44-67"><a href="#cb44-67" aria-hidden="true" tabindex="-1"></a><span class="fu">get_cat_demo</span>(<span class="at">variable =</span> RACE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 7
  category                    Placebo_Female Placebo_Male Xanomeline Low Dose_…¹
  &lt;chr&gt;                       &lt;chr&gt;          &lt;chr&gt;        &lt;chr&gt;                 
1 AMERICAN INDIAN OR ALASKA … 0 (  0.0)      0 (  0.0)    0 (  0.0)             
2 BLACK OR AFRICAN AMERICAN   5 (  9.4)      3 (  9.1)    6 ( 12.0)             
3 WHITE                       48 ( 90.6)     30 ( 90.9)   44 ( 88.0)            
# ℹ abbreviated name: ¹​`Xanomeline Low Dose_Female`
# ℹ 3 more variables: `Xanomeline Low Dose_Male` &lt;chr&gt;,
#   `Xanomeline High Dose_Female` &lt;chr&gt;, `Xanomeline High Dose_Male` &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="추가-읽기-선택-사항" class="level2" data-number="9.9">
<h2 data-number="9.9" class="anchored" data-anchor-id="추가-읽기-선택-사항"><span class="header-section-number">9.9</span> 추가 읽기 (선택 사항)</h2>
<p>Tidyeval은 꽤 복잡해질 수 있습니다. 이 교육에서 발생할 수 있는 몇 가지 일반적인 시나리오를 탐색하려고 노력했습니다. 더 자세히 알고 싶다면 다음 링크를 검토하는 것을 고려하십시오:</p>
<ul>
<li>https://dcl-prog.stanford.edu/tidy-eval-detailed.html</li>
<li>https://lukas-r.blog/posts/2022-04-20-not-so-standard-evaluations</li>
<li>https://rlang.r-lib.org/reference/topic-quosure.html</li>
<li>고급 R 책 - 17-20장: https://adv-r.hadley.nz/</li>
</ul>
</section>
<section id="챌린지" class="level2" data-number="9.10">
<h2 data-number="9.10" class="anchored" data-anchor-id="챌린지"><span class="header-section-number">9.10</span> 챌린지</h2>
<p>이전에 사용했던 데이터셋을 다시 방문해 보겠습니다. 이 미니 프로젝트에서 배운 포옹 및 동적 점 개념을 미니 프로젝트 7에서 개발한 <code>adsl_counts</code> 함수에 적용하십시오. 시작할 코드는 다음과 같습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdist)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'ggdist'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:rlang':

    ll</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'cowplot'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:lubridate':

    stamp</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio) <span class="co"># import()를 위해 rio가 로드되었는지 확인</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># %&gt;% 및 filter/mutate를 위해 dplyr이 로드되었는지 확인</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>inFile <span class="ot">&lt;-</span> <span class="st">"./data/adlbc.xpt"</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: 함수 수정</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>plot_ALT <span class="ot">&lt;-</span> <span class="cf">function</span>(ALT, x_var, y_var, ...) { <span class="co"># ...는 labs()에 대한 추가 인수를 캡처합니다.</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  ALT2 <span class="ot">&lt;-</span> ALT <span class="sc">%&gt;%</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(VISITNUM <span class="sc">&gt;</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">WEEK =</span> <span class="fu">floor</span>(ADY<span class="sc">/</span><span class="dv">7</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(WEEK <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">16</span>, <span class="dv">24</span>, <span class="dv">26</span>))</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>  ALT2 <span class="sc">%&gt;%</span></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> {{ x_var }}, <span class="at">y =</span> <span class="fu">as.factor</span>( {{ y_var }} ))) <span class="sc">+</span> <span class="co"># x_var 및 y_var 포옹</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">150</span>)) <span class="sc">+</span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>    ggdist<span class="sc">::</span><span class="fu">stat_dotsinterval</span>(<span class="at">show_slab=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> ALT2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(LBNRIND <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"HIGH"</span>, <span class="st">"LOW"</span>)),</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> {{ x_var }}, <span class="at">y =</span> <span class="fu">as.factor</span>( {{ y_var }} )), <span class="co"># geom_point에 대해 x_var 및 y_var 다시 포옹</span></span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>               <span class="at">colour=</span><span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(...) <span class="sc">+</span> <span class="co"># 추가 인수를 labs()에 직접 전달</span></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>    cowplot<span class="sc">::</span><span class="fu">draw_label</span>(<span class="st">"DRAFT"</span>, <span class="at">color =</span> <span class="st">"grey"</span>,</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>                        <span class="at">alpha=</span><span class="fl">0.3</span>, <span class="at">size =</span> <span class="dv">50</span>,</span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>                        <span class="at">angle =</span> <span class="dv">45</span>)</span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: 함수가 예상대로 작동하는지 확인</span></span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a><span class="fu">import</span>(inFile) <span class="sc">%&gt;%</span></span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PARAMCD <span class="sc">==</span> <span class="st">"ALT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_ALT</span>(<span class="at">x_var =</span> LBSTRESN, <span class="at">y_var =</span> WEEK, <span class="co"># 데이터의 열 이름입니다.</span></span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="st">"알라닌 아미노전이효소 (U/L)"</span>, <span class="at">y =</span> <span class="st">"주"</span>) <span class="co"># labs()에 전달되는 레이블입니다.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="MiniProject11_ko_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./MiniProject10_ko.html" class="pagination-link" aria-label="디버깅">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">디버깅</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./MiniProject12_ko.html" class="pagination-link" aria-label="12 - 테스트">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">12 - 테스트</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>