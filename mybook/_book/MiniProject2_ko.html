<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mike K Smith">
<meta name="dcterms.date" content="2023-02-13">

<title>2&nbsp; 2 - 연속형 및 범주형 데이터 요약 – Pharma Hands-on Exercises</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./MiniProject3_ko.html" rel="next">
<link href="./MiniProject1_ko.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-cd63b520c5e060288b5099369e8bcbf0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./MiniProject2_ko.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">2 - 연속형 및 범주형 데이터 요약</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Pharma Hands-on Exercises</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">초록</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject1_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">데이터셋 읽기 및 탐색</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject2_ko.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">2 - 연속형 및 범주형 데이터 요약</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject3_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">3 - 그룹화된 요약 통계 생성</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject4_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">요약 테이블 데이터 생성</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject5_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">{ggplot2} 시작하기</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject6_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">{ggplot2} 확장 패키지</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject7_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">7 - 함수 작성 시작하기</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject8_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">반복을 통한 함수 적용</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject10_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">디버깅</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject11_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">깔끔한 평가</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject12_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">12 - 테스트</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject13_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">코드 스타일</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MiniProject14_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">R 스니펫</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#r-코딩에-익숙해지고-성별에-따른-범주형-변수의-개수-및-백분율-생성" id="toc-r-코딩에-익숙해지고-성별에-따른-범주형-변수의-개수-및-백분율-생성" class="nav-link active" data-scroll-target="#r-코딩에-익숙해지고-성별에-따른-범주형-변수의-개수-및-백분율-생성"><span class="header-section-number">3</span> R 코딩에 익숙해지고 성별에 따른 범주형 변수의 개수 및 백분율 생성</a>
  <ul class="collapse">
  <li><a href="#목표" id="toc-목표" class="nav-link" data-scroll-target="#목표"><span class="header-section-number">3.1</span> 목표:</a></li>
  <li><a href="#이-문서-사용법" id="toc-이-문서-사용법" class="nav-link" data-scroll-target="#이-문서-사용법"><span class="header-section-number">3.2</span> 이 문서 사용법:</a></li>
  <li><a href="#데이터-소스" id="toc-데이터-소스" class="nav-link" data-scroll-target="#데이터-소스"><span class="header-section-number">3.3</span> 데이터 소스</a></li>
  <li><a href="#r-객체-및-함수" id="toc-r-객체-및-함수" class="nav-link" data-scroll-target="#r-객체-및-함수"><span class="header-section-number">3.4</span> R 객체 및 함수</a></li>
  <li><a href="#미니-프로젝트-시작" id="toc-미니-프로젝트-시작" class="nav-link" data-scroll-target="#미니-프로젝트-시작"><span class="header-section-number">3.5</span> 미니 프로젝트 시작</a></li>
  <li><a href="#챌린지-1-최종-인구-통계-테이블을-만들려면-이-챌린지를-완료해야-합니다." id="toc-챌린지-1-최종-인구-통계-테이블을-만들려면-이-챌린지를-완료해야-합니다." class="nav-link" data-scroll-target="#챌린지-1-최종-인구-통계-테이블을-만들려면-이-챌린지를-완료해야-합니다."><span class="header-section-number">3.6</span> 챌린지 1: 최종 인구 통계 테이블을 만들려면 이 챌린지를 완료해야 합니다.</a></li>
  <li><a href="#챌린지-2" id="toc-챌린지-2" class="nav-link" data-scroll-target="#챌린지-2"><span class="header-section-number">3.7</span> 챌린지 2:</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">2 - 연속형 및 범주형 데이터 요약</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mike K Smith </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 13, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="r-코딩에-익숙해지고-성별에-따른-범주형-변수의-개수-및-백분율-생성" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> R 코딩에 익숙해지고 성별에 따른 범주형 변수의 개수 및 백분율 생성</h1>
<p>이 프로젝트에서는 다음과 같은 인구 통계 요약 테이블을 만드는 것을 목표로 합니다: <img src="img/MiniProject2_demog_table.png" class="img-fluid" alt="인구 통계 표"></p>
<p>우리가 만들 테이블이 이와 똑같이 생기지는 않겠지만, 이 테이블의 구조를 모방하려고 노력할 것입니다.</p>
<section id="목표" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="목표"><span class="header-section-number">3.1</span> 목표:</h2>
<ul>
<li>ADSL SAS (xpt) 데이터셋 읽기</li>
<li>유효성 분석 모집단에 대한 부분집합 만들기</li>
<li>그룹화 변수 내 관측치 개수 세기 및 총 N에 대한 백분율 계산</li>
<li>결과 데이터를 전치하여 표 작성 준비</li>
</ul>
</section>
<section id="이-문서-사용법" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="이-문서-사용법"><span class="header-section-number">3.2</span> 이 문서 사용법:</h2>
<p>이 문서에서는 코드 청크(일반적으로 밝은 회색 배경)와 텍스트를 볼 수 있습니다. 이것은 “Rmarkdown” 문서의 예입니다. 문서 내에서 코드를 작성하고 실행할 수 있으며 결과는 각 코드 청크 아래에 표시됩니다. 텍스트에 작성된 지침에 따라 코드 청크를 수정하고 실행하여 지시된 대로 출력을 생성해야 합니다.</p>
</section>
<section id="데이터-소스" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="데이터-소스"><span class="header-section-number">3.3</span> 데이터 소스</h2>
<p>이 프로젝트에서는 익명화된 CDISC 데이터셋을 사용하며, 여기에서 찾을 수 있습니다: https://github.com/phuse-org/phuse-scripts/tree/master/data/adam/cdisc</p>
</section>
<section id="r-객체-및-함수" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="r-객체-및-함수"><span class="header-section-number">3.4</span> R 객체 및 함수</h2>
<p>R 내에서는 일반적으로 데이터, 벡터, 리스트 등 다양한 유형의 객체를 사용한 다음 함수를 적용합니다. 함수는 <code>&lt;함수_이름&gt;(&lt;인수1&gt;=   , &lt;인수2&gt; = )</code> 구조를 가집니다. 함수를 사용할 때 인수 이름을 반드시 사용할 필요는 없으며, 대신 위치에 따라 암시적으로 인수를 참조할 수 있습니다. 예를 들어 <code>myFunction(foo, 1, "bar")</code>는 R 객체 <code>foo</code>를 인수 1의 값으로 전달하고, 인수 2는 값 <code>1</code>을, 인수 3은 문자 값 <code>"bar"</code>를 갖습니다. R을 배우는 동안에는 함수에 하나의 인수만 있는 경우를 제외하고는 함수에서 인수를 명시적으로 이름 짓고 사용하는 것이 좋습니다. RStudio IDE의 탭 완성 기능을 사용하여 함수 호출 인수를 완성할 수 있습니다. 함수의 인수를 보려면 콘솔에 <code>?&lt;함수이름&gt;</code>을 입력하십시오.</p>
</section>
<section id="미니-프로젝트-시작" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="미니-프로젝트-시작"><span class="header-section-number">3.5</span> 미니 프로젝트 시작</h2>
<ol type="1">
<li>다음 단계에서는 <code>tidyverse</code>, <code>rio</code>, <code>skimr</code>, <code>htmlTable</code> 패키지를 로드합니다. 패키지를 사용하기 전에 해당 패키지의 함수와 내용을 로드해야 하며, 프로그램이나 스크립트의 시작 부분에서 이 작업을 수행하는 것이 가장 좋습니다. 코드 청크 오른쪽의 녹색 화살표를 클릭하여 아래 청크를 실행하십시오.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.3.0
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.4     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>GitHub 위치(<code>https://github.com/phuse-org/phuse-scripts/raw/master/data/adam/cdisc/adsl.xpt</code>)에서 CDISC adsl 데이터를 읽어와 할당 연산자 <code>&lt;-</code>를 사용하여 R의 객체에 할당합니다. URL 위치가 <code>" "</code>로 묶인 문자열인지 확인하십시오. <code>rio</code> 패키지에는 데이터를 R로 읽어오고 파일 이름에서 데이터 유형을 유추하는 <code>import</code>라는 함수가 있습니다. 해당 함수의 첫 번째 인수는 <code>file</code>입니다. 아래 코드의 <code>file=</code> 인수 뒤에 위 파일 경로/URL을 붙여넣은 다음 녹색 화살표를 사용하여 청크를 실행하십시오.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="at">file =</span> <span class="st">"./data/adsl.xpt"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(adsl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       STUDYID     USUBJID SUBJID SITEID SITEGR1                  ARM
1 CDISCPILOT01 01-701-1015   1015    701     701              Placebo
2 CDISCPILOT01 01-701-1023   1023    701     701              Placebo
3 CDISCPILOT01 01-701-1028   1028    701     701 Xanomeline High Dose
4 CDISCPILOT01 01-701-1033   1033    701     701  Xanomeline Low Dose
5 CDISCPILOT01 01-701-1034   1034    701     701 Xanomeline High Dose
6 CDISCPILOT01 01-701-1047   1047    701     701              Placebo
                TRT01P TRT01PN               TRT01A TRT01AN     TRTSDT
1              Placebo       0              Placebo       0 2014-01-02
2              Placebo       0              Placebo       0 2012-08-05
3 Xanomeline High Dose      81 Xanomeline High Dose      81 2013-07-19
4  Xanomeline Low Dose      54  Xanomeline Low Dose      54 2014-03-18
5 Xanomeline High Dose      81 Xanomeline High Dose      81 2014-07-01
6              Placebo       0              Placebo       0 2013-02-12
      TRTEDT TRTDUR AVGDD CUMDOSE AGE AGEGR1 AGEGR1N  AGEU  RACE RACEN SEX
1 2014-07-02    182   0.0       0  63    &lt;65       1 YEARS WHITE     1   F
2 2012-09-01     28   0.0       0  64    &lt;65       1 YEARS WHITE     1   M
3 2014-01-14    180  77.7   13986  71  65-80       2 YEARS WHITE     1   M
4 2014-03-31     14  54.0     756  74  65-80       2 YEARS WHITE     1   M
5 2014-12-30    183  76.9   14067  77  65-80       2 YEARS WHITE     1   F
6 2013-03-09     26   0.0       0  85    &gt;80       3 YEARS WHITE     1   F
                  ETHNIC SAFFL ITTFL EFFFL COMP8FL COMP16FL COMP24FL DISCONFL
1     HISPANIC OR LATINO     Y     Y     Y       Y        Y        Y         
2     HISPANIC OR LATINO     Y     Y     Y       N        N        N        Y
3 NOT HISPANIC OR LATINO     Y     Y     Y       Y        Y        Y         
4 NOT HISPANIC OR LATINO     Y     Y     Y       N        N        N        Y
5 NOT HISPANIC OR LATINO     Y     Y     Y       Y        Y        Y         
6 NOT HISPANIC OR LATINO     Y     Y     Y       N        N        N        Y
  DSRAEFL DTHFL BMIBL BMIBLGR1 HEIGHTBL WEIGHTBL EDUCLVL   DISONSDT DURDIS
1                25.1   25-&lt;30    147.3     54.4      16 2010-04-30   43.9
2       Y        30.4     &gt;=30    162.6     80.3      14 2006-03-11   76.4
3                31.4     &gt;=30    177.8     99.3      16 2009-12-16   42.8
4                28.8   25-&lt;30    175.3     88.5      12 2009-08-02   55.3
5                26.1   25-&lt;30    154.9     62.6       9 2011-09-29   32.9
6       Y        30.4     &gt;=30    148.6     67.1       8 2009-07-26   42.0
  DURDSGR1   VISIT1DT    RFSTDTC    RFENDTC VISNUMEN     RFENDT
1     &gt;=12 2013-12-26 2014-01-02 2014-07-02       12 2014-07-02
2     &gt;=12 2012-07-22 2012-08-05 2012-09-02        5 2012-09-02
3     &gt;=12 2013-07-11 2013-07-19 2014-01-14       12 2014-01-14
4     &gt;=12 2014-03-10 2014-03-18 2014-04-14        5 2014-04-14
5     &gt;=12 2014-06-24 2014-07-01 2014-12-30       12 2014-12-30
6     &gt;=12 2013-01-22 2013-02-12 2013-03-29        6 2013-03-29
                      DCDECOD         DCREASCD MMSETOT
1                   COMPLETED        Completed      23
2               ADVERSE EVENT    Adverse Event      23
3                   COMPLETED        Completed      23
4 STUDY TERMINATED BY SPONSOR Sponsor Decision      23
5                   COMPLETED        Completed      21
6               ADVERSE EVENT    Adverse Event      23</code></pre>
</div>
</div>
<p><code>adsl</code> 데이터 객체는 254개의 행과 48개의 열을 가지고 있습니다.</p>
<p>이제 유효성 분석 모집단에 대한 새 데이터 객체 <code>adsl_eff</code>를 만듭니다. 변수 <code>EFFFL</code>의 값이 <code>Y</code>인 <code>adsl</code> 데이터 객체를 필터링해야 합니다. 아래 질문에 답하고 정답을 코드 청크에 붙여넣으십시오.</p>
<hr>
<p>간단 퀴즈: 다음 중 변수 EFFFL의 값이 <code>Y</code>인 데이터를 필터링하는 옵션은 무엇입니까?</p>
<ul>
<li>filter(.data = adsl, EFFFL = Y)</li>
<li>filter(.data = adsl, EFFFL == “Y”)</li>
<li>filter(.data = adsl, “EFFFL” == “Y”)</li>
<li>filter(.data = adsl, EFFFL = “y”)</li>
</ul>
<p>(힌트: 이 작업은 미니 프로젝트 1에서도 수행했습니다)</p>
<p>확실하지 않은 경우 아래 코드 청크의 할당 <code>&lt;-</code> 뒤에 필터 문을 붙여넣어 각 옵션을 시도해 보십시오.</p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>adsl_eff <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(EFFFL <span class="sc">==</span> <span class="st">"Y"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(adsl_eff)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       STUDYID     USUBJID SUBJID SITEID SITEGR1                  ARM
1 CDISCPILOT01 01-701-1015   1015    701     701              Placebo
2 CDISCPILOT01 01-701-1023   1023    701     701              Placebo
3 CDISCPILOT01 01-701-1028   1028    701     701 Xanomeline High Dose
4 CDISCPILOT01 01-701-1033   1033    701     701  Xanomeline Low Dose
5 CDISCPILOT01 01-701-1034   1034    701     701 Xanomeline High Dose
6 CDISCPILOT01 01-701-1047   1047    701     701              Placebo
                TRT01P TRT01PN               TRT01A TRT01AN     TRTSDT
1              Placebo       0              Placebo       0 2014-01-02
2              Placebo       0              Placebo       0 2012-08-05
3 Xanomeline High Dose      81 Xanomeline High Dose      81 2013-07-19
4  Xanomeline Low Dose      54  Xanomeline Low Dose      54 2014-03-18
5 Xanomeline High Dose      81 Xanomeline High Dose      81 2014-07-01
6              Placebo       0              Placebo       0 2013-02-12
      TRTEDT TRTDUR AVGDD CUMDOSE AGE AGEGR1 AGEGR1N  AGEU  RACE RACEN SEX
1 2014-07-02    182   0.0       0  63    &lt;65       1 YEARS WHITE     1   F
2 2012-09-01     28   0.0       0  64    &lt;65       1 YEARS WHITE     1   M
3 2014-01-14    180  77.7   13986  71  65-80       2 YEARS WHITE     1   M
4 2014-03-31     14  54.0     756  74  65-80       2 YEARS WHITE     1   M
5 2014-12-30    183  76.9   14067  77  65-80       2 YEARS WHITE     1   F
6 2013-03-09     26   0.0       0  85    &gt;80       3 YEARS WHITE     1   F
                  ETHNIC SAFFL ITTFL EFFFL COMP8FL COMP16FL COMP24FL DISCONFL
1     HISPANIC OR LATINO     Y     Y     Y       Y        Y        Y         
2     HISPANIC OR LATINO     Y     Y     Y       N        N        N        Y
3 NOT HISPANIC OR LATINO     Y     Y     Y       Y        Y        Y         
4 NOT HISPANIC OR LATINO     Y     Y     Y       N        N        N        Y
5 NOT HISPANIC OR LATINO     Y     Y     Y       Y        Y        Y         
6 NOT HISPANIC OR LATINO     Y     Y     Y       N        N        N        Y
  DSRAEFL DTHFL BMIBL BMIBLGR1 HEIGHTBL WEIGHTBL EDUCLVL   DISONSDT DURDIS
1                25.1   25-&lt;30    147.3     54.4      16 2010-04-30   43.9
2       Y        30.4     &gt;=30    162.6     80.3      14 2006-03-11   76.4
3                31.4     &gt;=30    177.8     99.3      16 2009-12-16   42.8
4                28.8   25-&lt;30    175.3     88.5      12 2009-08-02   55.3
5                26.1   25-&lt;30    154.9     62.6       9 2011-09-29   32.9
6       Y        30.4     &gt;=30    148.6     67.1       8 2009-07-26   42.0
  DURDSGR1   VISIT1DT    RFSTDTC    RFENDTC VISNUMEN     RFENDT
1     &gt;=12 2013-12-26 2014-01-02 2014-07-02       12 2014-07-02
2     &gt;=12 2012-07-22 2012-08-05 2012-09-02        5 2012-09-02
3     &gt;=12 2013-07-11 2013-07-19 2014-01-14       12 2014-01-14
4     &gt;=12 2014-03-10 2014-03-18 2014-04-14        5 2014-04-14
5     &gt;=12 2014-06-24 2014-07-01 2014-12-30       12 2014-12-30
6     &gt;=12 2013-01-22 2013-02-12 2013-03-29        6 2013-03-29
                      DCDECOD         DCREASCD MMSETOT
1                   COMPLETED        Completed      23
2               ADVERSE EVENT    Adverse Event      23
3                   COMPLETED        Completed      23
4 STUDY TERMINATED BY SPONSOR Sponsor Decision      23
5                   COMPLETED        Completed      21
6               ADVERSE EVENT    Adverse Event      23</code></pre>
</div>
</div>
<p>데이터를 필터링한 후 이제 234개의 행과 48개의 열이 있습니다.</p>
<p>다시 말하지만, R은 대소문자를 구분합니다. SAS 데이터셋의 대부분의 변수 이름은 대문자이므로 변수 이름이 <code>Efffl</code> 등이 아닌 <code>EFFFL</code>인지 확인해야 합니다. 또한 값이 문자이므로 동등한 값의 대소문자가 예상 결과(예: <code>y</code> 또는 <code>Yes</code>가 아닌 <code>Y</code>)와 일치하고 따옴표 <code>" "</code>로 묶여 있는지 확인해야 합니다.</p>
<p>R에서의 방어적 프로그래밍: 값의 대소문자를 보장할 수 없는 데이터를 다루는 경우, 변수 이름을 감싼 <code>casefold()</code> 함수를 사용하여 비교하기 전에 값을 대문자로 변환하는 것이 좋습니다. 예: <code>casefold(EFFFL, upper=TRUE) == "Y"</code></p>
<ol start="3" type="1">
<li>한계 총합(N) 계산 - 각 치료 그룹의 개인 수 계산.</li>
</ol>
<p>다음으로 각 테이블 셀의 관측치 백분율(n/N * 100%) 계산을 위한 분모 역할을 할 한계 총합(큰 N)을 세고 저장해야 합니다.</p>
<p>아래 R 청크에서는 <code>adsl_eff</code> 데이터셋으로 시작하여 <code>group_by()</code> 함수에 지정된 변수의 각 수준에 있는 관측치 수를 셉니다.</p>
<blockquote class="blockquote">
<p><strong><em>SAS 사용자를 위한 R:</em></strong> <code>group_by()</code> 함수는 SAS의 <code>BY ;</code> 문과 매우 유사하게 작동합니다. <code>group_by()</code> 다음에 수행하는 모든 작업은 <code>group_by()</code> 내 변수의 <strong><em>각 수준</em></strong>에 대해 수행됩니다.</p>
</blockquote>
<p>다음 코드 청크에서는 치료 변수 <code>TRT01A</code>의 각 수준 내 관측치 수를 계산하려고 합니다. {dplyr} 패키지에는 바로 그 역할을 하는 <code>count()</code>라는 함수가 있습니다. 아래 코드의 <code>group_by()</code> 함수에 치료 변수 <code>TRT01A</code>를 추가하여 각 치료 그룹의 관측치 수를 계산하십시오.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>adsl_eff <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TRT01A) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"N"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
# Groups:   TRT01A [3]
  TRT01A                   N
  &lt;chr&gt;                &lt;int&gt;
1 Placebo                 79
2 Xanomeline High Dose    74
3 Xanomeline Low Dose     81</code></pre>
</div>
</div>
<p>위 코드에서 group_by() 문을 주석 처리하면 어떻게 됩니까? (힌트: 주석 처리할 줄의 시작 부분에 <code>#</code>를 사용하여 코드를 주석 처리하거나, 줄에 커서를 놓거나 줄을 강조 표시하고 바로 가기 키 CTRL+SHIFT+C를 사용하십시오).</p>
<p><code>group_by()</code>를 사용할 때마다 R은 그룹화 변수를 출력으로 가져옵니다. 이 예에서는 1차 치료 기간의 숫자 값인 <code>TRT01AN</code>과 레이블인 <code>TRT01A</code>를 모두 갖는 것이 유용합니다. 이는 정렬에는 숫자 값을 사용하고 최종 테이블에 인쇄할 때는 레이블을 사용하기를 원하기 때문입니다. 이 경우 <code>TRT01AN</code>과 <code>TRT01A</code> 사이에 1:1 관계가 있으므로 이전과 동일한 답을 얻는다는 점에 유의하십시오.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Big_N_cnt <span class="ot">&lt;-</span> adsl_eff <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TRT01AN, TRT01A) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"N"</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Big_N_cnt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
# Groups:   TRT01AN, TRT01A [3]
  TRT01AN TRT01A                   N
    &lt;dbl&gt; &lt;chr&gt;                &lt;int&gt;
1       0 Placebo                 79
2      54 Xanomeline Low Dose     81
3      81 Xanomeline High Dose    74</code></pre>
</div>
</div>
<ol start="4" type="1">
<li><p>다음으로 각 치료군 <strong><em>내에서</em></strong> <code>SEX</code> 변수의 각 범주 내 “작은 n” 개수를 계산하려고 합니다.</p>
<p><code>group_by()</code>에 추가 변수를 추가하면 해당 변수 수준의 각 고유 조합에 대한 관측치 수를 계산합니다. 위 코드를 수정하여 <code>SEX</code> 변수를 추가해 보겠습니다.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>small_n_cnt <span class="ot">&lt;-</span> adsl_eff <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TRT01AN, TRT01A, SEX) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n"</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(small_n_cnt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
# Groups:   TRT01AN, TRT01A, SEX [6]
  TRT01AN TRT01A               SEX       n
    &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt; &lt;int&gt;
1       0 Placebo              F        46
2       0 Placebo              M        33
3      54 Xanomeline Low Dose  F        47
4      54 Xanomeline Low Dose  M        34
5      81 Xanomeline High Dose F        35
6      81 Xanomeline High Dose M        39</code></pre>
</div>
</div>
<p><code>group_by()</code> 변수를 다른 순서로 사용하면 다른 답을 얻을 수 있습니까?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>adsl_eff <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SEX, TRT01AN, TRT01A) <span class="sc">%&gt;%</span> <span class="co"># 변수 순서 변경</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
# Groups:   SEX, TRT01AN, TRT01A [6]
  SEX   TRT01AN TRT01A                   n
  &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;                &lt;int&gt;
1 F           0 Placebo                 46
2 F          54 Xanomeline Low Dose     47
3 F          81 Xanomeline High Dose    35
4 M           0 Placebo                 33
5 M          54 Xanomeline Low Dose     34
6 M          81 Xanomeline High Dose    39</code></pre>
</div>
</div>
<p>아니요. 하지만 출력의 열에 있는 변수 순서가 변경됩니다.</p>
<ol start="5" type="1">
<li>백분율을 계산하기 전에 “Big_N_cnt”와 “small_n_cnt” 병합…</li>
</ol>
<p>{dplyr} 패키지는 R 사용자에게 <code>left_join</code>, <code>right_join</code>, <code>inner_join</code>, <code>full_join</code>, <code>anti_join</code>, <code>semi_join</code>과 같은 다양한 방법을 사용하여 두 데이터셋/테이블을 조인하거나 필터링하는 “SQL과 유사한” 기능을 제공합니다. (자세한 내용은 <a href="https://dplyr.tidyverse.org/articles/two-table.html" class="uri">https://dplyr.tidyverse.org/articles/two-table.html</a> 참조). <code>PROC SQL</code>을 알고 있다면 이것이 매우 익숙할 것입니다.</p>
<p>다음 단계에서는 <code>left_join</code>을 사용하여 왼쪽 데이터셋인 <code>small_n_cnt</code>를 오른쪽 데이터셋인 <code>Big_N_cnt</code>와 결합합니다. 이렇게 하면 왼쪽 데이터셋의 모든 항목이 결과 데이터 객체에 존재하게 됩니다. 어떤 데이터셋을 왼쪽에 두고 어떤 데이터셋을 오른쪽에 두어야 하는지 생각할 때 약간의 주의가 필요합니다…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>adsl_mrg_cnt <span class="ot">&lt;-</span> small_n_cnt <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(Big_N_cnt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(TRT01AN, TRT01A)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(adsl_mrg_cnt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
# Groups:   TRT01AN, TRT01A, SEX [6]
  TRT01AN TRT01A               SEX       n     N
    &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt; &lt;int&gt; &lt;int&gt;
1       0 Placebo              F        46    79
2       0 Placebo              M        33    79
3      54 Xanomeline Low Dose  F        47    81
4      54 Xanomeline Low Dose  M        34    81
5      81 Xanomeline High Dose F        35    74
6      81 Xanomeline High Dose M        39    74</code></pre>
</div>
</div>
<p><code>Big_N_cnt</code>에서 <code>TRT01A</code> 및 <code>TRT01AN</code>이 일치하는 행은 <code>small_n_cnt</code>의 행과 일치하며 필요한 경우 반복됩니다. 기본적으로 {dplyr}의 <code>&lt;&gt;_join</code> 함수는 두 데이터셋에 모두 존재하는 변수 이름을 기준으로 일치시키려고 시도합니다.</p>
<p><em>필요한 경우</em> 조인할 변수를 명시적으로 정의하고 각 데이터셋에서 조인 변수를 식별할 수 있습니다:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>small_n_cnt <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(Big_N_cnt, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"TRT01A"</span>, <span class="st">"TRT01AN"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
# Groups:   TRT01AN, TRT01A, SEX [6]
  TRT01AN TRT01A               SEX       n     N
    &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt; &lt;int&gt; &lt;int&gt;
1       0 Placebo              F        46    79
2       0 Placebo              M        33    79
3      54 Xanomeline Low Dose  F        47    81
4      54 Xanomeline Low Dose  M        34    81
5      81 Xanomeline High Dose F        35    74
6      81 Xanomeline High Dose M        39    74</code></pre>
</div>
</div>
<p>데이터 조인에 대한 자세한 내용은 다음 비네트를 참조하십시오: <a href="https://dplyr.tidyverse.org/articles/two-table.html" class="uri">https://dplyr.tidyverse.org/articles/two-table.html</a></p>
<ol start="6" type="1">
<li><code>SEX</code>별로 분할된 치료 그룹 <code>TRT01A</code>에 대한 백분율을 계산합니다.</li>
</ol>
<p>이 단계에서는 <code>TRT01A</code> 또는 <code>TRT01AN</code>으로 지정된 각 치료 그룹 내 각 <code>SEX</code>의 관측치(시험 대상자) 백분율을 포함하는 새 열을 <code>adsl_mrg_cnt</code> 데이터셋에 만들려고 합니다. {dplyr} 패키지를 사용하면 <code>mutate()</code>라는 함수를 사용하여 기존 데이터셋에 새 변수를 추가하고 기존 열을 기반으로 해당 값을 결정할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>adsl_mrg_cnt <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> (n<span class="sc">/</span>N)<span class="sc">*</span><span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
# Groups:   TRT01AN, TRT01A, SEX [6]
  TRT01AN TRT01A               SEX       n     N  perc
    &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
1       0 Placebo              F        46    79  58.2
2       0 Placebo              M        33    79  41.8
3      54 Xanomeline Low Dose  F        47    81  58.0
4      54 Xanomeline Low Dose  M        34    81  42.0
5      81 Xanomeline High Dose F        35    74  47.3
6      81 Xanomeline High Dose M        39    74  52.7</code></pre>
</div>
</div>
<p><code>perc</code> 계산에서 변수 이름 <code>n</code>과 <code>N</code> 주위에 따옴표를 넣을 필요가 없다는 점에 유의하십시오. tidyverse와 {dplyr} 내에서 이러한 변수 이름은 입력 데이터 <code>adsl_mrg_cnt</code>의 범위 내에서 평가되기 때문입니다.</p>
<ol start="7" type="1">
<li>백분율을 소수점 한 자리로 반올림합니다.</li>
</ol>
<p>위 데이터에서 처음 두 백분율은 소수점 이하 자릿수가 많습니다. 표에서 사용하기 위해 소수점 한 자리로 반올림하고 싶을 것입니다. R 함수 <code>round()</code>를 사용하여 이를 달성할 수 있습니다.</p>
<hr>
<p><strong><em>참고</em></strong>: R의 <code>round()</code> 함수는 SAS의 round 함수와 기본값이 다릅니다. 여러 곳에서 이를 발견할 수 있습니다. 즉, 기본 옵션이 달라 결과에 차이가 발생합니다. 이 점을 인지하고 결과의 비교 가능성을 보장하는 것이 중요한 경우 R 함수 인수 및 설정을 SAS 옵션과 일치시킬 수 있는지 조사하십시오.</p>
<p>이를 조사하기 위해 몇 가지 예제 값을 살펴보겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.1</span>, <span class="fl">1.499</span>, <span class="fl">1.5</span>,<span class="fl">1.9</span>, <span class="fl">2.5</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 2 2 2</code></pre>
</div>
</div>
<p>R은 1.5와 2.5를 가장 가까운 짝수 값으로 반올림합니다. 이는 IEC 60559 표준(참조: ‘IEEE 754’)을 따릅니다. 즉, <strong><em>틀린</em></strong> 것이 아니라 <strong><em>SAS와 다를 뿐입니다.</em></strong> 이 점을 인지하고, 예를 들어 <code>?round</code>를 사용하여 함수의 R 도움말을 확인하고 각 도구가 값을 계산하는 방법을 보려면 SAS 설명서도 확인하십시오.</p>
<p>백분위수/사분위수 계산 및 각 도구가 결측 데이터를 처리하는 방법에서도 SAS와 R 간에 차이가 있습니다.</p>
<hr>
<p>우리 테이블의 값을 반올림하려면 새 변수 <code>perc</code>를 계산하는 <code>mutate()</code> 함수 내에서 <code>round()</code> 함수를 사용하려고 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>adsl_mrg_cnt <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> <span class="fu">round</span>((n<span class="sc">/</span>N)<span class="sc">*</span><span class="dv">100</span>, <span class="at">digits=</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
# Groups:   TRT01AN, TRT01A, SEX [6]
  TRT01AN TRT01A               SEX       n     N  perc
    &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
1       0 Placebo              F        46    79  58.2
2       0 Placebo              M        33    79  41.8
3      54 Xanomeline Low Dose  F        47    81  58  
4      54 Xanomeline Low Dose  M        34    81  42  
5      81 Xanomeline High Dose F        35    74  47.3
6      81 Xanomeline High Dose M        39    74  52.7</code></pre>
</div>
</div>
<ol start="8" type="1">
<li>테이블에 사용할 숫자 값 서식 지정.</li>
</ol>
<p>테이블에서 숫자 값을 사용할 때 테이블의 값이 일관된 표현을 갖도록 해야 하므로 “20.0”과 “26.1” 모두에 소수점 한 자리를 사용합니다(“20.0”이 “20”이 되는 대신). 인쇄 서식을 적용하고 숫자 값을 문자로 변환하여 이를 쉽게 달성할 수 있습니다. R에서는 <code>format()</code> 함수를 사용하여 이를 달성합니다. <code>format()</code> 함수 인수 <code>nsmall</code>은 사용할 최소 소수 자릿수를 정의합니다. 따라서 <code>nsmall=1</code>로 설정하면 모든 값이 최소 소수점 한 자리로 서식이 지정됩니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>adsl_mrg_cnt <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> <span class="fu">round</span>((n<span class="sc">/</span>N)<span class="sc">*</span><span class="dv">100</span>, <span class="at">digits=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc_char =</span> <span class="fu">format</span>(perc, <span class="at">nsmall=</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
# Groups:   TRT01AN, TRT01A, SEX [6]
  TRT01AN TRT01A               SEX       n     N  perc perc_char
    &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;    
1       0 Placebo              F        46    79  58.2 58.2     
2       0 Placebo              M        33    79  41.8 41.8     
3      54 Xanomeline Low Dose  F        47    81  58   58.0     
4      54 Xanomeline Low Dose  M        34    81  42   42.0     
5      81 Xanomeline High Dose F        35    74  47.3 47.3     
6      81 Xanomeline High Dose M        39    74  52.7 52.7     </code></pre>
</div>
</div>
<p>이 출력에서 <code>perc</code> 열은 <code>&lt;dbl&gt;</code> 유형이고 <code>perc_char</code>는 <code>&lt;char&gt;</code> 유형이라는 점에 유의하십시오. R에서 문자 유형인 모든 것은 더 이상 서식이 지정되지 않으며 테이블이나 목록에 “있는 그대로” 표시됩니다.</p>
<ol start="9" type="1">
<li>개수와 백분율을 함께 붙여넣기</li>
</ol>
<p>테이블에 표시하기 위해 일반적으로 개수와 관련 백분율을 모두 표시하려고 합니다. 이제 <code>perc_char</code> 문자 변수가 있으므로 R의 <code>paste()</code> 및 <code>paste0()</code> 함수를 사용하여 쉽게 할 수 있습니다. 이 두 함수는 문자열과 변수를 함께 붙이는 데 동일하게 작동하지만 <code>paste()</code>는 기본 구분 기호가 단일 공백이고 <code>paste0()</code>는 구분 기호가 없습니다.</p>
<hr>
<p>아래 각 코드 청크에 대해 무엇을 보게 될지 예측할 수 있습니까? <em>먼저</em> 생각해 본 다음 코드를 실행하여 맞는지 확인하십시오.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>perc_char <span class="ot">&lt;-</span> <span class="st">"26.1"</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(n, <span class="st">"("</span>,perc_char,<span class="st">")"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "6 ( 26.1 )"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(n, <span class="fu">paste0</span>(<span class="st">"("</span>,perc_char,<span class="st">")"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "6 (26.1)"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(n, <span class="st">"("</span>,perc_char,<span class="st">")"</span>, <span class="at">sep=</span><span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "6(26.1)"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(n, <span class="st">"("</span>,perc_char,<span class="st">")"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "6(26.1)"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(n, <span class="st">" ("</span>,perc_char,<span class="st">")"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "6 (26.1)"</code></pre>
</div>
</div>
<hr>
<p>문자에 추가 공백을 추가하거나(간과하기 쉬움) 구분 기호를 변경하는 것(다른 인수임)보다 <code>paste</code>와 <code>paste0</code>를 결합하는 것이 더 명확하다고 생각합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>adsl_mrg_cnt <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> <span class="fu">round</span>((n<span class="sc">/</span>N)<span class="sc">*</span><span class="dv">100</span>, <span class="at">digits=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc_char =</span> <span class="fu">format</span>(perc, <span class="at">nsmall=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">npct =</span> <span class="fu">paste</span>(n, </span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">paste0</span>( <span class="st">"("</span>, perc_char, <span class="st">")"</span> ) </span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>                      ) </span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>         )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
# Groups:   TRT01AN, TRT01A, SEX [6]
  TRT01AN TRT01A               SEX       n     N  perc perc_char npct     
    &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
1       0 Placebo              F        46    79  58.2 58.2      46 (58.2)
2       0 Placebo              M        33    79  41.8 41.8      33 (41.8)
3      54 Xanomeline Low Dose  F        47    81  58   58.0      47 (58.0)
4      54 Xanomeline Low Dose  M        34    81  42   42.0      34 (42.0)
5      81 Xanomeline High Dose F        35    74  47.3 47.3      35 (47.3)
6      81 Xanomeline High Dose M        39    74  52.7 52.7      39 (52.7)</code></pre>
</div>
</div>
<p>위 청크의 마지막 줄에서 코드는 어떤 괄호와 paste() 함수의 부분이 함께 가는지 명확하게 하기 위해 신중하게 서식이 지정되었습니다. 이것은 스타일 결정이지만 다른 사람이 코드를 쉽게 읽고 이해할 수 있도록 만들면 코드 검토에 큰 도움이 됩니다. 코드 스타일 가이드는 여기에서 찾을 수 있습니다 <a href="https://style.tidyverse.org/" class="uri">https://style.tidyverse.org/</a>.</p>
<ol start="10" type="1">
<li><code>SEX</code> 레이블을 더 읽기 쉬운 것으로 변경합니다.</li>
</ol>
<p>현재 <code>SEX</code> 변수에는 “M”과 “F” 값이 있습니다. 대부분의 사람들에게는 이것이 상당히 명백할 수 있지만 “Male”과 “Female”로 변경하면 더 해석하기 쉬울 것입니다. 이것은 상당히 간단한 재코딩 연습입니다. {dplyr}에는 재코딩을 위한 몇 가지 옵션이 있지만 여기서는 <code>recode()</code> 함수를 사용할 것입니다. 이것을 <code>mutate()</code> 함수 호출 <strong><em>내에서</em></strong> 사용해야 합니다. 이 경우 동일한 열 이름을 다시 사용할 수 있습니다.</p>
<p><code>recode()</code> 함수는 <code>&lt;old&gt; = &lt;new&gt;</code>의 왼쪽에 포함되지 않은 모든 값을 그대로 둡니다. <code>case_when()</code> 함수를 사용하면 “모두 잡기” 옵션(기본적으로 if… elseif… else … 문의 시퀀스와 같음)으로 재코딩할 수 있으며 특정 상황에서 더 유용할 수 있습니다. 이 경우 값이 두 개뿐이므로 <code>recode()</code>를 사용하는 것이 더 쉽습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>adsl_mrg_cnt <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> <span class="fu">round</span>((n<span class="sc">/</span>N)<span class="sc">*</span><span class="dv">100</span>, <span class="at">digits=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc_char =</span> <span class="fu">format</span>(perc, <span class="at">nsmall=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">npct =</span> <span class="fu">paste</span>(n,</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">paste0</span>( <span class="st">"("</span>, perc_char, <span class="st">")"</span> )</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>                      )</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">%&gt;%</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SEX =</span> <span class="fu">recode</span>(SEX,</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"M"</span> <span class="ot">=</span> <span class="st">"Male"</span>,</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"F"</span> <span class="ot">=</span> <span class="st">"Female"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
# Groups:   TRT01AN, TRT01A, SEX [6]
  TRT01AN TRT01A               SEX        n     N  perc perc_char npct     
    &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
1       0 Placebo              Female    46    79  58.2 58.2      46 (58.2)
2       0 Placebo              Male      33    79  41.8 41.8      33 (41.8)
3      54 Xanomeline Low Dose  Female    47    81  58   58.0      47 (58.0)
4      54 Xanomeline Low Dose  Male      34    81  42   42.0      34 (42.0)
5      81 Xanomeline High Dose Female    35    74  47.3 47.3      35 (47.3)
6      81 Xanomeline High Dose Male      39    74  52.7 52.7      39 (52.7)</code></pre>
</div>
</div>
<ol start="11" type="1">
<li>그룹 해제</li>
</ol>
<p>위 데이터에서 여전히 그룹이 정의되어 있음을 알 수 있습니다 <code>Groups: TRT01AN, TRT01A, SEX [6]</code>.</p>
<p>다음 작업을 수행하기 전에 그룹화를 “끄는” 것이 좋습니다. 그렇지 않으면 R은 그룹화 변수의 각 값에 대해 다음 작업을 시도할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>adsl_mrg_cnt <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  TRT01AN TRT01A               SEX       n     N
    &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt; &lt;int&gt; &lt;int&gt;
1       0 Placebo              F        46    79
2       0 Placebo              M        33    79
3      54 Xanomeline Low Dose  F        47    81
4      54 Xanomeline Low Dose  M        34    81
5      81 Xanomeline High Dose F        35    74
6      81 Xanomeline High Dose M        39    74</code></pre>
</div>
</div>
<ol start="12" type="1">
<li>파이프를 사용하여 이러한 단계를 함께 연결합니다.</li>
</ol>
<p>6, 7, 8, 9단계에서는 데이터를 병합하고 테이블 값을 계산하고 서식을 지정하는 R 청크를 살펴보았습니다. 그러나 각각에서 중간 데이터셋을 저장하거나 이름을 지정하는 데 특별히 관심이 없습니다. 따라서 파이프 함수를 사용하여 이들을 하나의 파이프라인으로 결합할 수 있습니다. 아래 청크에서 아래 단계를 올바른 순서로 복사하여 붙여넣어 테이블에 표시할 최종 데이터를 준비하십시오. 테이블에 필요한 변수만 선택하기 위해 추가 <code>select()</code>를 포함했습니다. 첫 번째 줄은 파이프라인의 출력을 데이터 객체 <code>adsl_mrg_cnt</code>에 할당해야 합니다… (힌트: 각 단계의 {dplyr} 함수 이름을 스스로 말하고 <code>%&gt;%</code>를 “…그런 다음…”으로 생각하여 수행해야 하는 단계의 순서를 설명하는 데 도움이 될 수 있습니다)</p>
<ul>
<li><p><code>mutate(perc = round(n/N*100, digits=1)) %&gt;%</code></p></li>
<li><p><code>left_join(Big_N_cnt) %&gt;%</code></p></li>
<li><p><code>mutate(perc_char = format(perc, nsmall=1)) %&gt;%</code></p></li>
<li><p><code>mutate(npct = paste(n, "(", perc_char, ")" ) ) %&gt;%</code></p></li>
<li><p><code>select(TRT01A, SEX, npct)</code></p></li>
<li><p><code>ungroup() %&gt;%</code></p></li>
<li><p><code>mutate(SEX = recode(SEX, "M" = "Male", "F" = "Female")) %&gt;%</code></p></li>
<li><p><code>small_n_cnt %&gt;%</code></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>adsl_mrg_cnt <span class="ot">&lt;-</span> small_n_cnt <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(Big_N_cnt) <span class="sc">%&gt;%</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> <span class="fu">round</span>(n<span class="sc">/</span>N<span class="sc">*</span><span class="dv">100</span>, <span class="at">digits=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc_char =</span> <span class="fu">format</span>(perc, <span class="at">nsmall=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">npct =</span> <span class="fu">paste</span>(n, <span class="st">"("</span>, perc_char, <span class="st">")"</span> ) ) <span class="sc">%&gt;%</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SEX =</span> <span class="fu">recode</span>(SEX, <span class="st">"M"</span> <span class="ot">=</span> <span class="st">"Male"</span>, <span class="st">"F"</span> <span class="ot">=</span> <span class="st">"Female"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRT01A, SEX, npct)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(TRT01AN, TRT01A)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 이 데이터를 표시하여 확인할 수 있습니다.</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(adsl_mrg_cnt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  TRT01A               SEX    npct       
  &lt;chr&gt;                &lt;chr&gt;  &lt;chr&gt;      
1 Placebo              Female 46 ( 58.2 )
2 Placebo              Male   33 ( 41.8 )
3 Xanomeline Low Dose  Female 47 ( 58.0 )
4 Xanomeline Low Dose  Male   34 ( 42.0 )
5 Xanomeline High Dose Female 35 ( 47.3 )
6 Xanomeline High Dose Male   39 ( 52.7 )</code></pre>
</div>
</div>
<ol start="13" type="1">
<li>테이블에 맞게 데이터 전치</li>
</ol>
<p>이렇게 하면 테이블에 대한 데이터가 준비되지만 예상 테이블 형식과 일치하도록 레이아웃을 정렬해야 합니다. 그렇게 하려면 데이터를 전치해야 하며, 이를 위해 {tidyr} 패키지 함수 <code>pivot_wider()</code>를 사용합니다. <code>pivot_wider()</code>의 경우 새 (피벗된) 열의 이름을 제공하는 열(<code>names_from</code>)과 이러한 열의 값을 제공하는 열(<code>values_from</code>)을 함수에 알려주어야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>adsl_mrg_cnt <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> TRT01A, <span class="at">values_from =</span> npct)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  SEX    Placebo     `Xanomeline Low Dose` `Xanomeline High Dose`
  &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;                 &lt;chr&gt;                 
1 Female 46 ( 58.2 ) 47 ( 58.0 )           35 ( 47.3 )           
2 Male   33 ( 41.8 ) 34 ( 42.0 )           39 ( 52.7 )           </code></pre>
</div>
</div>
<hr>
</section>
<section id="챌린지-1-최종-인구-통계-테이블을-만들려면-이-챌린지를-완료해야-합니다." class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="챌린지-1-최종-인구-통계-테이블을-만들려면-이-챌린지를-완료해야-합니다."><span class="header-section-number">3.6</span> 챌린지 1: 최종 인구 통계 테이블을 만들려면 이 챌린지를 완료해야 합니다.</h2>
<p>위 단계를 반복하되 Big_N_cnt 및 small_n_cnt 계산에 추가 그룹화 변수인 <code>AGEGRP</code>를 추가하십시오. 다음은 첫 번째 단계입니다:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 챌린지 1: AGEGRP로 단계 반복</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>adsl_saf <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span> <span class="fu">filter</span>(SAFFL <span class="sc">==</span> <span class="st">'Y'</span>)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. AGEGR1N 및 AGEGR1로 Big_N_cnt 계산</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>Big_N_cnt_agegrp <span class="ot">&lt;-</span> adsl_saf <span class="sc">%&gt;%</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TRT01AN, TRT01A, AGEGR1N, AGEGR1) <span class="sc">%&gt;%</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"N"</span>)</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"연령 그룹이 포함된 Big N:"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "연령 그룹이 포함된 Big N:"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(Big_N_cnt_agegrp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 5
# Groups:   TRT01AN, TRT01A, AGEGR1N, AGEGR1 [9]
  TRT01AN TRT01A               AGEGR1N AGEGR1     N
    &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt; &lt;chr&gt;  &lt;int&gt;
1       0 Placebo                    1 &lt;65       14
2       0 Placebo                    2 65-80     42
3       0 Placebo                    3 &gt;80       30
4      54 Xanomeline Low Dose        1 &lt;65        8
5      54 Xanomeline Low Dose        2 65-80     47
6      54 Xanomeline Low Dose        3 &gt;80       29
7      81 Xanomeline High Dose       1 &lt;65       11
8      81 Xanomeline High Dose       2 65-80     55
9      81 Xanomeline High Dose       3 &gt;80       18</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. SEX 및 AGEGR1N/AGEGR1로 small_n_cnt 계산</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>small_n_cnt_agegrp <span class="ot">&lt;-</span> adsl_saf <span class="sc">%&gt;%</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TRT01AN, TRT01A, AGEGR1N, AGEGR1, SEX) <span class="sc">%&gt;%</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n"</span>)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"연령 그룹 및 성별이 포함된 Small n:"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "연령 그룹 및 성별이 포함된 Small n:"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(small_n_cnt_agegrp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 6
# Groups:   TRT01AN, TRT01A, AGEGR1N, AGEGR1, SEX [18]
   TRT01AN TRT01A               AGEGR1N AGEGR1 SEX       n
     &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;int&gt;
 1       0 Placebo                    1 &lt;65    F         9
 2       0 Placebo                    1 &lt;65    M         5
 3       0 Placebo                    2 65-80  F        22
 4       0 Placebo                    2 65-80  M        20
 5       0 Placebo                    3 &gt;80    F        22
 6       0 Placebo                    3 &gt;80    M         8
 7      54 Xanomeline Low Dose        1 &lt;65    F         5
 8      54 Xanomeline Low Dose        1 &lt;65    M         3
 9      54 Xanomeline Low Dose        2 65-80  F        28
10      54 Xanomeline Low Dose        2 65-80  M        19
11      54 Xanomeline Low Dose        3 &gt;80    F        17
12      54 Xanomeline Low Dose        3 &gt;80    M        12
13      81 Xanomeline High Dose       1 &lt;65    F         5
14      81 Xanomeline High Dose       1 &lt;65    M         6
15      81 Xanomeline High Dose       2 65-80  F        28
16      81 Xanomeline High Dose       2 65-80  M        27
17      81 Xanomeline High Dose       3 &gt;80    F         7
18      81 Xanomeline High Dose       3 &gt;80    M        11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. adsl_mrg_cnt_agegrp에 대한 전체 파이프라인 생성</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>adsl_mrg_cnt_agegrp <span class="ot">&lt;-</span> small_n_cnt_agegrp <span class="sc">%&gt;%</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(Big_N_cnt_agegrp, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"TRT01AN"</span>, <span class="st">"TRT01A"</span>, <span class="st">"AGEGR1N"</span>, <span class="st">"AGEGR1"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> <span class="fu">round</span>((n<span class="sc">/</span>N)<span class="sc">*</span><span class="dv">100</span>, <span class="at">digits=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc_char =</span> <span class="fu">format</span>(perc, <span class="at">nsmall=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">npct =</span> <span class="fu">paste</span>(n, <span class="st">"("</span>, perc_char, <span class="st">")"</span> ) ) <span class="sc">%&gt;%</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SEX =</span> <span class="fu">recode</span>(SEX, <span class="st">"M"</span> <span class="ot">=</span> <span class="st">"Male"</span>, <span class="st">"F"</span> <span class="ot">=</span> <span class="st">"Female"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># AGEGR1을 포함하여 최종 테이블에 대한 관련 열 선택</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRT01A, AGEGR1, SEX, npct) <span class="sc">%&gt;%</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 선택 사항: 더 나은 표시를 위해 정렬</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(TRT01A, AGEGR1, SEX)</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"챌린지 1에 대한 최종 병합 및 처리된 데이터:"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "챌린지 1에 대한 최종 병합 및 처리된 데이터:"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(adsl_mrg_cnt_agegrp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  TRT01A  AGEGR1 SEX    npct       
  &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;      
1 Placebo 65-80  Female 22 ( 52.4 )
2 Placebo 65-80  Male   20 ( 47.6 )
3 Placebo &lt;65    Female 9 ( 64.3 ) 
4 Placebo &lt;65    Male   5 ( 35.7 ) 
5 Placebo &gt;80    Female 22 ( 73.3 )
6 Placebo &gt;80    Male   8 ( 26.7 ) </code></pre>
</div>
</div>
<p>코드가 재현 가능한지 확인하려면 RStudio IDE 인터페이스의 “knit” 버튼을 사용하여 저장된 .Rmd 파일을 기반으로 HTML 파일을 만듭니다. 코드 청크가 재현 가능하면 결과적으로 HTML 파일을 얻게 됩니다. 그렇지 않은 경우(“knit” 프로세스에 오류가 있거나 실패하는 경우) “Run” 버튼 오른쪽의 화살표를 클릭하고 “Restart R and Run All Chunks”를 선택합니다. 그런 다음 문제가 있는 청크를 해결합니다.</p>
</section>
<section id="챌린지-2" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="챌린지-2"><span class="header-section-number">3.7</span> 챌린지 2:</h2>
<p>이 CDISC 데이터셋(<code>adae.xpt</code>)을 기반으로 안전성 모집단(SAFFL)에 대한 신체 텍스트 용어(AEBODSYS)의 개수 및 백분율을 생성합니다. .RMD 파일을 바탕 화면에 저장하고 파일 상단의 “Knit” 버튼을 클릭하여 이 문서의 HTML 버전을 렌더링합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. adae 데이터 읽기</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>adae <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="at">file =</span> <span class="st">"./data/adae.xpt"</span>)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 안전성 모집단 필터링 (SAFFL == 'Y')</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>adae_saf <span class="ot">&lt;-</span> adae <span class="sc">%&gt;%</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SAFFL <span class="sc">==</span> <span class="st">'Y'</span>)</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. adae_saf에 대한 Big_N 계산 (안전성을 위한 치료당 총 N)</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 충돌을 피하고 관련 정보를 유지하기 위해 adsl에서 필요한 열만 선택</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>adsl_trt_info <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(USUBJID, TRT01AN, TRT01A)</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 왼쪽 조인을 수행하여 adae_saf에 치료 정보 추가</span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>adae_saf_with_trt <span class="ot">&lt;-</span> adae_saf <span class="sc">%&gt;%</span></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(adsl_trt_info, <span class="at">by =</span> <span class="st">"USUBJID"</span>)</span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. small_n 계산 (각 치료군 내 AEBODSYS 개수)</span></span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>Big_N_adae <span class="ot">&lt;-</span> adae_saf_with_trt <span class="sc">%&gt;%</span></span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TRT01AN, TRT01A) <span class="sc">%&gt;%</span></span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">N =</span> <span class="fu">n_distinct</span>(USUBJID), <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="co"># 치료당 고유 대상자 수 계산</span></span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a>                                                     <span class="co"># .groups = 'drop'은 마지막에 그룹화를 제거합니다.</span></span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-23"><a href="#cb64-23" aria-hidden="true" tabindex="-1"></a>small_n_adae <span class="ot">&lt;-</span> adae_saf_with_trt <span class="sc">%&gt;%</span></span>
<span id="cb64-24"><a href="#cb64-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TRT01AN, TRT01A, AEBODSYS) <span class="sc">%&gt;%</span></span>
<span id="cb64-25"><a href="#cb64-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n"</span>) <span class="sc">%&gt;%</span> <span class="co"># 각 치료 그룹 내 각 AEBODSYS의 발생 횟수 계산</span></span>
<span id="cb64-26"><a href="#cb64-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="co"># 최종 파이프라인 전에 더 명확한 보기를 위해 일시적으로 그룹 해제</span></span>
<span id="cb64-27"><a href="#cb64-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-28"><a href="#cb64-28" aria-hidden="true" tabindex="-1"></a>adae_table_data <span class="ot">&lt;-</span> small_n_adae <span class="sc">%&gt;%</span></span>
<span id="cb64-29"><a href="#cb64-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(Big_N_adae, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"TRT01AN"</span>, <span class="st">"TRT01A"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb64-30"><a href="#cb64-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> <span class="fu">round</span>((n<span class="sc">/</span>N)<span class="sc">*</span><span class="dv">100</span>, <span class="at">digits=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb64-31"><a href="#cb64-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc_char =</span> <span class="fu">format</span>(perc, <span class="at">nsmall=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb64-32"><a href="#cb64-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">npct =</span> <span class="fu">paste0</span>(n, <span class="st">" ("</span>, perc_char, <span class="st">"%)"</span>)) <span class="sc">%&gt;%</span> <span class="co"># 일반적인 형식: n (perc%)</span></span>
<span id="cb64-33"><a href="#cb64-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb64-34"><a href="#cb64-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 최종 테이블에 대한 관련 열 선택</span></span>
<span id="cb64-35"><a href="#cb64-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRT01A, AEBODSYS, npct) <span class="sc">%&gt;%</span></span>
<span id="cb64-36"><a href="#cb64-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 더 나은 표시를 위해 정렬 (먼저 치료 숫자로, 그런 다음 AEBODSYS로)</span></span>
<span id="cb64-37"><a href="#cb64-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 올바르게 정렬하려면 TRT01AN이 일시적으로 다시 필요합니다.</span></span>
<span id="cb64-38"><a href="#cb64-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">select</span>(Big_N_adae, TRT01AN, TRT01A), <span class="at">by =</span> <span class="st">"TRT01A"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb64-39"><a href="#cb64-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(TRT01AN, AEBODSYS) <span class="sc">%&gt;%</span></span>
<span id="cb64-40"><a href="#cb64-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>TRT01AN) <span class="co"># 정렬 후 TRT01AN 제거</span></span>
<span id="cb64-41"><a href="#cb64-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-42"><a href="#cb64-42" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(adae_table_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  TRT01A  AEBODSYS                                             npct       
  &lt;chr&gt;   &lt;chr&gt;                                                &lt;chr&gt;      
1 Placebo CARDIAC DISORDERS                                    27 ( 39.1%)
2 Placebo EAR AND LABYRINTH DISORDERS                          2 (  2.9%) 
3 Placebo EYE DISORDERS                                        8 ( 11.6%) 
4 Placebo GASTROINTESTINAL DISORDERS                           26 ( 37.7%)
5 Placebo GENERAL DISORDERS AND ADMINISTRATION SITE CONDITIONS 48 ( 69.6%)
6 Placebo HEPATOBILIARY DISORDERS                              1 (  1.4%) </code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./MiniProject1_ko.html" class="pagination-link" aria-label="데이터셋 읽기 및 탐색">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">데이터셋 읽기 및 탐색</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./MiniProject3_ko.html" class="pagination-link" aria-label="3 - 그룹화된 요약 통계 생성">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">3 - 그룹화된 요약 통계 생성</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>